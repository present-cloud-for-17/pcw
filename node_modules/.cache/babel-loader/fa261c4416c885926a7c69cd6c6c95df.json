{"remainingRequest":"W:\\pcw\\node_modules\\babel-loader\\lib\\index.js!W:\\pcw\\src\\main.js","dependencies":[{"path":"W:\\pcw\\src\\main.js","mtime":1590158554982},{"path":"W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"W:\\\\pcw\\\\node_modules\\\\core-js\\\\modules\\\\es6.array.iterator.js\";\nimport \"W:\\\\pcw\\\\node_modules\\\\core-js\\\\modules\\\\es6.promise.js\";\nimport \"W:\\\\pcw\\\\node_modules\\\\core-js\\\\modules\\\\es6.object.assign.js\";\nimport \"W:\\\\pcw\\\\node_modules\\\\core-js\\\\modules\\\\es7.promise.finally.js\";\nimport Vue from 'vue';\nimport App from \"./App.vue\";\nimport router from \"./routes\";\nimport ElementUI from 'element-ui';\nimport VueI18n from 'vue-i18n';\nimport { messages } from \"./layout/default/i18n\";\nimport 'element-ui/lib/theme-chalk/index.css'; // 默认主题\n// import './shared/components/assets/css/theme-green/index.css'; // 浅绿色主题\n\nimport \"./shared/components/assets/css/icon.css\";\nimport \"./layout/default/directives\";\nimport 'babel-polyfill';\nVue.config.productionTip = false;\nVue.use(VueI18n);\nVue.use(ElementUI, {\n  size: 'small'\n});\nvar i18n = new VueI18n({\n  locale: 'zh',\n  messages: messages\n}); //使用钩子函数对路由进行权限跳转\n\nrouter.beforeEach(function (to, from, next) {\n  document.title = \"\".concat(to.meta.title);\n  var user = localStorage.getItem('ms_username'); //判断是否为用户\n\n  var secret = 1; //为token验证提供判断，每次判断前需向端发送验证请求，返回判断结果，待完善\n\n  if (secret !== 1 && to.path !== '/login' && to.path !== '/register' && to.path !== '/forgetpassword') {\n    //无token情况\n    next('/login');\n    document.title = '登录';\n  } else if (!user && to.path !== '/login' && to.path !== '/register' && to.path !== '/forgetpassword') {\n    //有token非用户情况\n    next('/login');\n    document.title = '登录';\n  } else if (to.meta.permission) {\n    // 如果是管理员权限则可进入，这里只是简单的模拟管理员权限而已\n    role === 'admin' ? next() : next('/403');\n  } else {\n    // 简单的判断IE10及以下不进入富文本编辑器，该组件不兼容\n    if (navigator.userAgent.indexOf('MSIE') > -1 && to.path === '/editor') {\n      Vue.prototype.$alert('vue-quill-editor组件不兼容IE10及以下浏览器，请使用更高版本的浏览器查看', '浏览器不兼容通知', {\n        confirmButtonText: '确定'\n      });\n    } else {\n      next();\n    }\n  }\n});\nnew Vue({\n  router: router,\n  i18n: i18n,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["W:/pcw/src/main.js"],"names":["Vue","App","router","ElementUI","VueI18n","messages","config","productionTip","use","size","i18n","locale","beforeEach","to","from","next","document","title","meta","user","localStorage","getItem","secret","path","permission","role","navigator","userAgent","indexOf","prototype","$alert","confirmButtonText","render","h","$mount"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP;AACA,OAAOC,MAAP;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,UAApB;AAEA,SAASC,QAAT;AACA,OAAO,sCAAP,C,CAA+C;AAC/C;;AACA;AACA;AACA,OAAO,gBAAP;AAEAL,GAAG,CAACM,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAP,GAAG,CAACQ,GAAJ,CAAQJ,OAAR;AACAJ,GAAG,CAACQ,GAAJ,CAAQL,SAAR,EAAmB;AACfM,EAAAA,IAAI,EAAE;AADS,CAAnB;AAGA,IAAMC,IAAI,GAAG,IAAIN,OAAJ,CAAY;AACrBO,EAAAA,MAAM,EAAE,IADa;AAErBN,EAAAA,QAAQ,EAARA;AAFqB,CAAZ,CAAb,C,CAKA;;AACAH,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClCC,EAAAA,QAAQ,CAACC,KAAT,aAAoBJ,EAAE,CAACK,IAAH,CAAQD,KAA5B;AACA,MAAME,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAb,CAFkC,CAEe;;AACjD,MAAMC,MAAM,GAAG,CAAf,CAHkC,CAGjB;;AAEjB,MAAIA,MAAM,KAAK,CAAX,IAAgBT,EAAE,CAACU,IAAH,KAAY,QAA5B,IAAwCV,EAAE,CAACU,IAAH,KAAY,WAApD,IAAmEV,EAAE,CAACU,IAAH,KAAY,iBAAnF,EAAsG;AAClG;AACAR,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACAC,IAAAA,QAAQ,CAACC,KAAT,GAAiB,IAAjB;AACH,GAJD,MAIO,IAAG,CAACE,IAAD,IAASN,EAAE,CAACU,IAAH,KAAY,QAArB,IAAiCV,EAAE,CAACU,IAAH,KAAY,WAA7C,IAA4DV,EAAE,CAACU,IAAH,KAAY,iBAA3E,EAA8F;AACjG;AACAR,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACAC,IAAAA,QAAQ,CAACC,KAAT,GAAiB,IAAjB;AACH,GAJM,MAIA,IAAIJ,EAAE,CAACK,IAAH,CAAQM,UAAZ,EAAwB;AAC3B;AACAC,IAAAA,IAAI,KAAK,OAAT,GAAmBV,IAAI,EAAvB,GAA4BA,IAAI,CAAC,MAAD,CAAhC;AACH,GAHM,MAGA;AACH;AACA,QAAIW,SAAS,CAACC,SAAV,CAAoBC,OAApB,CAA4B,MAA5B,IAAsC,CAAC,CAAvC,IAA4Cf,EAAE,CAACU,IAAH,KAAY,SAA5D,EAAuE;AACnEvB,MAAAA,GAAG,CAAC6B,SAAJ,CAAcC,MAAd,CAAqB,+CAArB,EAAsE,UAAtE,EAAkF;AAC9EC,QAAAA,iBAAiB,EAAE;AAD2D,OAAlF;AAGH,KAJD,MAIO;AACHhB,MAAAA,IAAI;AACP;AACJ;AAEJ,CA3BD;AA6BA,IAAIf,GAAJ,CAAQ;AACJE,EAAAA,MAAM,EAANA,MADI;AAEJQ,EAAAA,IAAI,EAAJA,IAFI;AAGJsB,EAAAA,MAAM,EAAE,gBAAAC,CAAC;AAAA,WAAIA,CAAC,CAAChC,GAAD,CAAL;AAAA;AAHL,CAAR,EAIGiC,MAJH,CAIU,MAJV","sourcesContent":["import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport router from './routes';\r\nimport ElementUI from 'element-ui';\r\nimport VueI18n from 'vue-i18n';\r\n\r\nimport { messages } from './layout/default/i18n';\r\nimport 'element-ui/lib/theme-chalk/index.css'; // 默认主题\r\n// import './shared/components/assets/css/theme-green/index.css'; // 浅绿色主题\r\nimport './shared/components/assets/css/icon.css';\r\nimport './layout/default/directives';\r\nimport 'babel-polyfill';\r\n\r\nVue.config.productionTip = false;\r\nVue.use(VueI18n);\r\nVue.use(ElementUI, {\r\n    size: 'small'\r\n});\r\nconst i18n = new VueI18n({\r\n    locale: 'zh',\r\n    messages\r\n});\r\n\r\n//使用钩子函数对路由进行权限跳转\r\nrouter.beforeEach((to, from, next) => {\r\n    document.title = `${to.meta.title}`;\r\n    const user = localStorage.getItem('ms_username');//判断是否为用户\r\n    const secret = 1;//为token验证提供判断，每次判断前需向端发送验证请求，返回判断结果，待完善\r\n\r\n    if (secret !== 1 && to.path !== '/login' && to.path !== '/register' && to.path !== '/forgetpassword') {\r\n        //无token情况\r\n        next('/login');\r\n        document.title = '登录';\r\n    } else if(!user && to.path !== '/login' && to.path !== '/register' && to.path !== '/forgetpassword') {\r\n        //有token非用户情况\r\n        next('/login');\r\n        document.title = '登录';\r\n    } else if (to.meta.permission) {\r\n        // 如果是管理员权限则可进入，这里只是简单的模拟管理员权限而已\r\n        role === 'admin' ? next() : next('/403');\r\n    } else {\r\n        // 简单的判断IE10及以下不进入富文本编辑器，该组件不兼容\r\n        if (navigator.userAgent.indexOf('MSIE') > -1 && to.path === '/editor') {\r\n            Vue.prototype.$alert('vue-quill-editor组件不兼容IE10及以下浏览器，请使用更高版本的浏览器查看', '浏览器不兼容通知', {\r\n                confirmButtonText: '确定'\r\n            });\r\n        } else {\r\n            next();\r\n        }\r\n    }\r\n\r\n});\r\n\r\nnew Vue({\r\n    router,\r\n    i18n,\r\n    render: h => h(App)\r\n}).$mount('#app');\r\n"]}]}