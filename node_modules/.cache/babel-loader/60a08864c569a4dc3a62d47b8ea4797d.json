{"remainingRequest":"W:\\pcw\\node_modules\\thread-loader\\dist\\cjs.js!W:\\pcw\\node_modules\\babel-loader\\lib\\index.js!W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!W:\\pcw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!W:\\pcw\\src\\routes\\passport\\shared\\Level.vue?vue&type=script&lang=js&","dependencies":[{"path":"W:\\pcw\\src\\routes\\passport\\shared\\Level.vue","mtime":1593787311886},{"path":"W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetchCourseData, ModifyCourseData, AddCourseData, SearchCourseData, DelCourseData, fetchCoursePData } from \"../../../core/index_course\";\nimport { fetchStuData, ModifyStuData, AddStuData, SearchStuData, DelStuData } from \"../../../core/index_student\";\nexport default {\n  name: 'userfrom',\n  data: function data() {\n    return {\n      btnKeyCode: '',\n      queryKeyCode: '',\n      query: {\n        major: '',\n        name: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      query2: {\n        major: '',\n        name: '',\n        pageIndex: 1,\n        pageSize: 10\n      },\n      query3: {},\n      temps: {\n        peId: ''\n      },\n      tableData: [],\n      tableData2: [],\n      tableData3: [],\n      tableData4: [],\n      multipleSelection: [],\n      delList: [],\n      addVisible: false,\n      editVisible: false,\n      detVisible: false,\n      pageTotal: 0,\n      pageTotal2: 0,\n      pageTotal3: 0,\n      form: {},\n      formadd: {\n        id: 6\n      },\n      oneinfo: {\n        peId: 0\n      },\n      idx: -1,\n      id: -1\n    };\n  },\n  created: function created() {\n    this.getData(); //this.getData2();\n  },\n  methods: {\n    // 获取 easy-mock 的模拟数据\n    getData: function getData() {\n      var _this = this;\n\n      fetchCourseData(this.query).then(function (res) {\n        //console.log(res);    \n        var tpeid = localStorage.getItem(\"ms_userpeid\");\n        _this.tableData = res.filter(function (item) {\n          return item.peId == tpeid;\n        });\n        _this.pageTotal = _this.tableData.length;\n      });\n      this.query.name = \"\";\n    },\n    // 触发搜索按钮\n    handleSearch: function handleSearch() {\n      var testN = this.query.name;\n      this.tableData = this.tableData.filter(function (item) {\n        return item.cName === testN;\n      });\n    },\n    handleDelete: function handleDelete(index, row) {\n      var _this2 = this;\n\n      // 二次确认删除\n      this.$confirm('确定要删除吗？', '提示', {\n        type: 'warning'\n      }).then(function () {\n        if (_this2.tableData.length > 1) {\n          delete row.peId;\n          _this2.temp = row;\n          console.log(_this2.temp);\n          DelCourseData(_this2.temp).then(function (res) {\n            if (res == 1) {\n              _this2.$message.success('删除成功');\n\n              _this2.tableData.splice(index, 1);\n            } else {\n              _this2.$message.error('删除失败，请通知管理员！');\n            }\n          });\n        } else {\n          _this2.$message.error('数据库内至少需要保留一条信息！');\n        }\n      }).catch(function () {});\n    },\n    //删除学生\n    handleDeleteS: function handleDeleteS(index, row) {\n      var _this3 = this;\n\n      // 二次确认删除\n      this.$confirm('确定要剔除该成员吗？', '提示', {\n        type: 'warning'\n      }).then(function () {\n        if (_this3.tableData2.length > 1) {\n          _this3.temps.peId = row.peId;\n          console.log(_this3.temps);\n          DelStuData(_this3.temps).then(function (res) {\n            if (res == 1) {\n              _this3.$message.success('删除成功');\n\n              _this3.tableData2.splice(index, 1);\n            } else {\n              _this3.$message.error('删除失败，请通知管理员！');\n            }\n          });\n        } else {\n          _this3.$message.error('数据库内至少需要保留一条信息！');\n        }\n      }).catch(function () {});\n    },\n    // 多选操作\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    delAllSelection: function delAllSelection() {\n      var length = this.multipleSelection.length;\n      var str = '';\n      this.delList = this.delList.concat(this.multipleSelection);\n\n      for (var i = 0; i < length; i++) {\n        str += this.multipleSelection[i].name + ' ';\n      }\n\n      this.$message.error(\"\\u5220\\u9664\\u4E86\".concat(str));\n      this.multipleSelection = [];\n    },\n    // 新增用户\n    handleAdd: function handleAdd() {\n      this.addVisible = true;\n    },\n    handleAddN: function handleAddN() {\n      this.$message.error(\"\\u6B64\\u529F\\u80FD\\u6682\\u7531\\u5B66\\u751F\\u7528\\u6237\\u4E8E\\u79FB\\u52A8\\u7AEF\\u8FDB\\u884C\\u7533\\u8BF7!\");\n    },\n    // 编辑操作\n    handleEdit: function handleEdit(index, row) {\n      this.idx = index;\n      this.form = row;\n      this.editVisible = true;\n    },\n    selectInfo: function selectInfo() {\n      var _this4 = this;\n\n      for (var n = 0; n <= this.pageTotal3; n++) {\n        this.oneinfo.peId = this.tableData3[n].peId;\n        console.log(this.oneinfo.peId);\n        SearchStuData(this.oneinfo).then(function (res) {\n          console.log(res);\n\n          _this4.tableData2.push(res);\n        });\n      }\n\n      this.pageTotal2 = this.tableData2.length;\n    },\n    //详情查看(每班学生)\n    handleDet: function handleDet(index, row) {\n      var _this5 = this;\n\n      this.idx = index;\n      this.form = row;\n      this.detVisible = true;\n      fetchStuData(this.query2).then(function (res) {\n        // this.tableData2 = res.filter(function(item){\n        //     return item.isTeacher == 0;\n        // })\n        fetchCoursePData(_this5.query).then(function (res2) {\n          _this5.tableData3 = res2.filter(function (item) {\n            return item.cId == row.cId;\n          });\n          _this5.pageTotal3 = _this5.tableData3.length;\n          _this5.oneinfo.peId = _this5.tableData3[0].peId;\n          SearchStuData(_this5.oneinfo).then(function (res) {\n            if (res.isTeacher == 0) {\n              _this5.tableData2.push(res);\n\n              console.log(_this5.tableData2);\n              _this5.pageTotal2 = 1;\n            }\n          });\n        }); //console.log(this.tableData2);\n      });\n    },\n    // 保存编辑\n    saveEdit: function saveEdit() {\n      this.editVisible = false;\n      this.$message.success(\"\\u4FEE\\u6539\\u7B2C \".concat(this.idx + 1, \" \\u884C\\u6210\\u529F\"));\n      this.$set(this.tableData, this.idx, this.form);\n    },\n    //保存新增\n    saveAdd: function saveAdd(tableData, event) {\n      this.addVisible = false;\n      this.$message.success(\"\\u65B0\\u589E\\u6210\\u529F\");\n      this.formadd.term = \"2020-12\";\n      this.formadd.peId = localStorage.getItem('ms_userpeid');\n      this.formadd.dailyWeight = 0.5;\n      this.formadd.finalWeight = 0.5;\n      AddCourseData(this.formadd);\n      this.formadd.peName = localStorage.getItem('ms_username');\n      console.log(this.formadd);\n      this.tableData.push(this.formadd);\n    },\n    // 分页导航\n    handlePageChange: function handlePageChange(val) {\n      this.$set(this.query, 'pageIndex', val);\n      this.getData();\n    }\n  }\n};",null]}