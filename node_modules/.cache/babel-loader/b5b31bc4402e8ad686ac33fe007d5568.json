{"remainingRequest":"W:\\pcw\\node_modules\\thread-loader\\dist\\cjs.js!W:\\pcw\\node_modules\\babel-loader\\lib\\index.js!W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!W:\\pcw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!W:\\pcw\\src\\routes\\passport\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"W:\\pcw\\src\\routes\\passport\\login\\Login.vue","mtime":1593866432238},{"path":"W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"W:\\pcw\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { UserLogin } from \"../../../core/index_login\";\nexport default {\n  data: function data() {\n    return {\n      query: {\n        loginToken: '',\n        passwordToken: '',\n        loginType: 1\n      },\n      test: [],\n      rules: {\n        loginToken: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        passwordToken: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this = this;\n\n      UserLogin(this.query).then(function (res) {\n        _this.test = res;\n        console.log(_this.test);\n        localStorage.setItem('ms_token', _this.test.data.token);\n\n        _this.$refs.login.validate(function (valid) {\n          if (valid) {\n            if (_this.test.message == \"custome Error!!!\") {\n              _this.$message.error('登录异常，请联系管理员！');\n\n              return false;\n            } else if (_this.test.data.user.status == 1 || _this.test.data.user.status == 2) {\n              if (_this.test.data.person != null) {\n                _this.$message.success('登录成功');\n\n                localStorage.setItem('ms_username', _this.test.data.person.peName);\n                localStorage.setItem('ms_userpeid', _this.test.data.person.peId);\n                localStorage.setItem('ms_status', _this.test.data.user.status);\n                localStorage.setItem('ms_uid', JSON.stringify(_this.test.data.user));\n\n                _this.$router.push('/');\n              } else {\n                _this.$message.error('无效账户，请检查账号密码！');\n\n                return false;\n              }\n            } else {\n              _this.$message.error('该系统只对教师和管理员开放！');\n\n              return false;\n            }\n          } else {\n            _this.$message.error('请输入账号和密码');\n\n            return false;\n          }\n        });\n      });\n    },\n    registernew: function registernew() {\n      this.$router.push('/register');\n    },\n    forgetpassward: function forgetpassward() {\n      this.$router.push('/forgetpassword');\n    }\n  }\n};",null]}